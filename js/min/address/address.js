(function(A,F){var G=100,E=null;STYLE_FILTER=null;String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"");};var C=function(J,K){this.opts={source:null,message:{suggestion:"从下列城市选择"}};this.target=J;this.init(K);};C.prototype={init:function(J){A.extend(true,this.opts,J);this.createStyle();this.createHtml();},createHtml:function(){var K=document.createElement("div");K.id="address_suggestionContainer_"+this.target[0].id;this.container=A(K);this.container.appendTo($$.container);var J=A.template.replace(this.opts.template.suggestion,{message:this.opts.message.suggestion,data:this.opts.source.suggestion});this.container.html(J);if(A.type(this.opts.template.suggestionInit)=="function"){this.opts.template.suggestionInit(this.container);}this.sView=this.container.children().first();this.sView[0].style.position="absolute";},show:function(){var J=this.target.offset();this.sView.css({left:J.left+"px ",top:(J.top+this.target[0].offsetHeight)+"px"});this.sView.cover();this.sView.show();},hide:function(){this.sView.uncover();this.sView.hide();},createStyle:function(){if(E){return;}E=true;var J;if($$.browser.IsIE){J=window.document.createStyleSheet();J.cssText=this.opts.template.suggestionStyle;}else{J=window.document.createElement("style");J.type="text/css";J.textContent=this.opts.template.suggestionStyle;window.document.getElementsByTagName("head")[0].appendChild(J);}}};var I=function(J,K){this.opts={source:null,message:{filterResult:"${val}，按拼音排序",noFilterResult:"对不起，找不到：${val}",isShowTitle:true,sort:[]},isShowHover:true,jsonpFilter:null,sort:["^0$","^1$","^3+$","^0","^1","^3+","0","1","3+"],charset:"utf-8",container:null};this.target=J;this.init(K);};I.prototype={init:function(J){A.extend(true,this.opts,J);A.extend(this,{_filterCount:0,_filterEnable:false,_lastFilterData:null,_lastFilterRendarData:null,_lastSelect:null});this.createStyle();this.createHtml();},createHtml:function(){if(this.opts.container==null){var J=document.createElement("div");J.id="address_filterContainer_"+this.target[0].id;this.container=A(J);this.container.appendTo($$.container);this.containerFlag=true;}else{this.container=this.opts.container;this.containerFlag=false;}if(A.type(this.opts.template.filterInit)=="function"){this.opts.template.filterInit(this.container);}},filterData:function(M,K,J,L){if(this.opts.jsonpFilter){this._filterDataByJsonp(M,K,J,L);}else{return this._filterData(M,K,J);}},_filterDataByJsonp:function(O,L,N,J){var K=this,P=[],M=0,Q=this._filterCount,R=A.template.render(this.opts.jsonpFilter,{key:encodeURIComponent(escape(O)),accurate:L?1:0});A.ajax({charset:this.opts.charset,url:R,dataType:"jsonp",global:false,success:(function(T){if((this._filterEnable||N)&&Q==this._filterCount){var V=T.data.split("@");for(var W=0,X=V.length;W<X;W++){if(V[W]){if(N){if(A.type(J)=="function"){J(V[W]);}return;}if(V[W].slice(0,2)=="$="){var S=A.template.render(V[W].slice(2),{val:val});}else{var U=V[W].split("|");var S={left:U[this.displayHash.left]||"",right:U[this.displayHash.right]||"",data:V[W]};}P[M++]=S;}}this.updateFilter(P,T.key);}}).bind(this)});},_filterData:function(N,S,W){var K=this,M=[],R=0,X=this.opts.source.data;switch(A.type(this.opts.sort)){case"array":var P=this.sortReString[S?"accurate":"vague"];var L=K.toReString(N);var J=A.type(this.opts.message.sort)=="array"?this.opts.message.sort:[];for(var T=0,U=P.length;T<U;T++){P[T][1]=L;var O=new RegExp(P[T].join(""),"gi");var Q=[],V=0;X=X.replace(O,function(e,Z){var d=Z.split("|");var Y={left:d[K.displayHash.left]||"",right:d[K.displayHash.right]||"",data:Z};Q[V++]=Y;return"";});if(V){Q.sort(this._sortData);if(W){return Q[0].data;}if(J[T]){Q.unshift(A.template.render(J[T],{val:val,items:Q}));}M[R++]=Q;}}if(W){return false;}break;case"function":Q=this.opts.sort(this.opts.source.data,N,S,W);if(W){if(Q.length){return Q[0].data;}else{return false;}}M[R++]=Q;break;default:A.error("address._filterData","invalid sort type");return false;break;}M=Array.prototype.concat.apply([],M);this.updateFilter(M,N);},updateFilter:function(U,L,S){var P=[],Q=0;var T=0;if(A.type(U)=="array"){this._lastFilterData=U;}else{U=this._lastFilterData;if(this._lastSelect){var J=this.container.find("*[data],label");for(var M=J.length-1;M>=0;M--){if(J[M]==this._lastSelect[0]){T=M;break;}}}else{T=-1;}}S=S||0;var O=this.opts.template.filterPageSize;var K=Math.ceil(U.length/O)-1;var R=Math.min(Math.max(0,S),K);var N={isShowTitle:this.opts.message.isShowTitle,val:L||this._lastValue,hasResult:true,list:K+1?U.slice(R*O,Math.min((R+1)*O,U.length)):null,page:{max:K,current:R}};if(N.list){this._lastFilterRendarData=N;}else{N=this._lastFilterRendarData;if(N){if(L){N.val=L;N.hasResult=false;}}else{this.clear();this._filterEnable=false;this.hide();return;}}N.message={filterResult:A.template.render(this.opts.message.filterResult,{val:L||this._lastValue}),noFilterResult:A.template.render(this.opts.message.noFilterResult,{val:L||this._lastValue})};P[Q++]=A.template.replace(this.opts.template.filter,N);this.container.html(P.join(""));this.sView=this.container.children().first();if(this.containerFlag){this.sView[0].style.position="absolute";}if(A.type(this.opts.template.filterInit)=="function"){this.opts.template.filterInit(this.container);}T=Math.max(0,Math.min(T,N.list.length-1));var J=this.container.find("*[data],label");if(J[T].tagName=="LABEL"){if(T==J.length-1){T-=1;}else{T+=1;}}if(this.opts.isShowHover){this.showHover(J[T]);}this.show();},showHover:function(J){if(!J){J=this.container.find("*[data]:first");}else{J=A(J);}if(this._lastSelect){if(this._lastSelect[0]==J[0]){return;}this._lastSelect.removeClass("hover");}J.addClass("hover");this._lastSelect=J;},_sortData:function(K,J){if(K.left>J.left){return 1;}else{if(K.left==J.left){return 0;}else{return -1;}}},toReString:function(J){var K={"\r":"\\r","\n":"\\n","\t":"\\t"};return J.replace(/([\.\\\/\+\*\?\[\]\{\}\(\)\^\$\|])/g,"\\$1").replace(/[\r\t\n]/g,function(L){return K[L];});},show:function(){var J=this.target.offset();if(this.containerFlag){this.sView.css({left:J.left+"px ",top:(J.top+this.target[0].offsetHeight)+"px"});}this.sView.cover();this.sView.show();},hide:function(){if(this.sView){this.sView.uncover();this.sView.hide();}},createStyle:function(){if(STYLE_FILTER){return;}STYLE_FILTER=true;var J;if($$.browser.IsIE){J=window.document.createStyleSheet();J.cssText=this.opts.template.filterStyle;}else{J=window.document.createElement("style");J.type="text/css";J.textContent=this.opts.template.filterStyle;window.document.getElementsByTagName("head")[0].appendChild(J);}},clear:function(){this._lastFilterData=null;this._lastFilterRendarData=null;this._lastSelect=null;}};var H=function(J,K){this.opts={source:null,jsonpSource:null,charset:"utf-8",relate:{},message:{suggestion:"从下列城市选择",filterResult:"${val}，按拼音排序",noFilterResult:"对不起，找不到：${val}",isShowTitle:true,sort:[]},isShowHover:true,isAutoCorrect:false,isFocusNext:false,sort:["^0$","^1$","^3+$","^0","^1","^3+","0","1","3+"],template:{suggestion:'                    <div class="c_address_box" style="display:none;">                        <div class="c_address_hd"><$= GlobalData.message $></div>                        <div class="c_address_bd">                            <ol class="c_address_ol">                                <$ for(var key in GlobalData.data){ $>                                    <li><span><$= key $></span></li>                                <$ } $>                            </ol>                            <$ for(var key in GlobalData.data){ $>                                <ul class="c_address_ul layoutfix">                                <$ for(var i =0,l=GlobalData.data[key].length;i < l;i++){                                    var item = GlobalData.data[key][i]; $>                                    <li><a data="<$= item.data $>" href="javascript:void(0);"><$= item.display $></a></li>                                <$ } $>                                </ul>                            <$ } $>                        </div>                    </div>                ',suggestionStyle:"                    ul,li,ol{ padding:0; margin:0; list-style:none}                    .c_address_box{ position:absolute; width:500px; background:#ffffff; top:30px; left:74px; z-index:99;  overflow:hidden; *zoom:1; border-top:5px solid #333333; box-shadow: 0 5px 5px rgba(0, 0, 0, 0.1);}                    .c_address_box .c_address_hd{ line-height:45px; height:45px;padding-left:10px; color:#666; font-size:12px; border:0; background:transparent}                    .c_address_box .c_address_hd em{ font-weight:normal; padding-left:5px;}                    .c_address_bd{ border:0; padding:0}                    .c_address_ol{background: none repeat scroll 0 0 #F3F3F3;border-bottom: 1px solid #DFDFDF;height: 35px;list-style-type: none;padding: 0 0 0 10px;}                    .c_address_ol li{ float: left;    height: 32px;}                    .c_address_ol li span{ float:left; line-height:32px; height:32px; width:76px; text-align:center; margin-top:3px; font-family:Arial; color:#666}                    .c_address_ol li .hot_selected{  background:#fff; border-left:1px solid #dddddd; border-right:1px solid #dddddd; border-top:3px solid #ff6501; font-weight:bold; margin-top:0;    color: #000000; position:relative;    font-weight: bold;    height: 33px;    margin-bottom: -1px;    padding: 0 7px;}                    .c_address_ul{ padding:18px 0 18px 23px; overflow:hidden;}                    .c_address_ul b{ position:absolute; width:20px; left:0px; top:0px; height:30px; line-height:30px;  color:#ff6600;}                    .c_address_ul li{ height:32px; width:93px; float:left; }                    .c_address_ul li a{ float:left; height:30px; line-height:30px; width:86px; margin-right:5px; color:#666}                    .c_address_ul li a:hover{ background:none transparent; color:#F60; border-color:#FFF; text-decoration:underline}                ",suggestionInit:D,filter:'                    <div class="c_address_select">                        <div class="c_address_wrap" style="width:'+(K.filterWidth||452)+'px;">                            <$ if(GlobalData.isShowTitle){ $>                            <div class="c_address_hd">                                <$ if(GlobalData.hasResult){ $><$= GlobalData.message.filterResult $>                                <$ } else{ $><$= GlobalData.message.noFilterResult $><$ } $>                            </div>                            <$ } $>                            <div class="c_address_list" style="">                                <$ for(var key in GlobalData.list){                                    var item = GlobalData.list[key]; $>                                    <a href="javascript:void(0);" data="<$= item.data $>" style="display: block;"><span><$= item.left $></span>                                        <$= item.right $></a>                                <$ } $>                            </div>                            <$ if(GlobalData.page.max > 0){ var page =GlobalData.page; $>                                <div class="c_address_pagebreak" style="display: block;">                                    <$ if(page.current>0){ $>                                        <a href="javascript:void(0);" page="<$= page.current-1 $>">&lt;-</a>                                    <$ } $>                                    <$ if(page.current<2){ $>                                        <$ for(var i = 0,l=Math.min(5,page.max+1);i < l;i++){ $>                                            <a href="javascript:void(0);" <$ if(page.current == i){ $>class="address_current"<$ } $>                                            page="<$= i $>"><$= i+1 $></a>                                        <$ } $>                                    <$ } else if(page.current>page.max-2){ $>                                        <$ for(var i = Math.max(0,page.max-4),l=page.max+1;i<l;i++){ $>                                            <a href="javascript:void(0);" <$ if(page.current == i){ $>class="address_current"<$ } $>                                            page="<$= i $>"><$= i+1 $></a>                                        <$ } $>                                    <$ } else { $>                                        <$ for(var i = Math.max(0,page.current-2),l=Math.min(page.current+3,page.max+1);i<l;i++){ $>                                            <a href="javascript:void(0);" <$ if(page.current == i){ $>class="address_current"<$ } $>                                            page="<$= i $>"><$= i+1 $></a>                                        <$ } $>                                    <$ } $>                                    <$ if(page.current<page.max){ $>                                        <a href="javascript:void(0);" page="<$= page.current+1 $>">-&gt;</a>                                    <$ } $>                                </div>                            <$ } $>                        </div>                    </div>                ',filterStyle:"                    .c_address_hd { height: 24px; border-color: #2F8150; border-style: solid; border-width: 1px 1px 0; background-color: #2F8150; color: #fff; line-height: 24px; padding-left: 10px; }                    .c_address_select { width:300px; height:355px; font-family: Arial, Simsun; font-size: 12px; }                    .c_address_wrap { width: 300px; height:349px; min-height: 305px; margin: 0; padding: 0 0 4px; border: 1px solid #969696; background:#fff; text-align: left; }                    .c_address_list { margin: 0; padding: 0; height:300px; }                    .c_address_list label { border-bottom: 1px solid #FFFFFF; border-top: 1px solid #FFFFFF; display: block; height: 22px; line-height: 22px; min-height: 22px; overflow: hidden; padding: 1px 9px 0; text-align: center; }                    .c_address_list span { float: right; font: 10px/22px verdana; margin: 0; overflow: hidden; padding: 0; text-align: right; white-space: nowrap; width: 110px; }                    .c_address_list a { border-bottom: 1px solid #FFFFFF; border-top: 1px solid #FFFFFF; color: #0055AA; cursor: pointer; display: block; height: 22px; line-height: 22px; min-height: 22px; overflow: hidden; padding: 1px 9px 0; text-align: left; text-decoration: none; }                    .c_address_list a.hover { background: none repeat scroll 0 0 #E8F4FF; border-bottom: 1px solid #7F9DB9; border-top: 1px solid #7F9DB9; }                    .address_selected { background: none repeat scroll 0 0 #FFE6A6; color: #FFFFFF; height: 22px; }                    .c_address_pagebreak { line-height: 25px; margin: 0; padding: 0; text-align: center; }                    .c_address_pagebreak a { color: #0055AA; display: inline-block; font-family: Arial, Simsun, sans-serif; font-size: 14px; margin: 0; padding: 0 4px; text-align: center; text-decoration: underline; width: 15px; }                    a.address_current { color: #000; text-decoration: none; }                ",filterInit:B,filterPageSize:10,filterContainer:null},display:{left:0,right:1,suggestion:1,value:1},delay:0,minLength:1};this.target=A(J);this.init();this.initialize(K);};H.prototype={init:function(){var J=document.createElement("div");J.id="_addressTemp_";J.style.display="none";$$.container.append(J);this.tempBox=A("#_addressTemp_");},initialize:function(J){this.setOptions(J);this.bindEvent();},setOptions:function(J){A.extend(true,this.opts,J);var K=this;if(!this.opts.source){if(this.opts.jsonpSource){A.ajax({charset:this.opts.charset,url:this.opts.jsonpSource,dataType:"jsonp",jsonp:"jsonpcallback",success:function(L){K.opts.source=L;}});}}A.extend(this,{_isFocus:false,_enable:false,_focusClock:null,_checkClock:null,_tmpValue:null,_lastValue:null,_isCharIn:false,_suggestionContainer:null,_suggestionStyle:"position:absolute;top:-100000px;left:-100000px;z-index:200;",_isSuggestionRender:false,_filterContainer:null,_filterStyle:"position:absolute;top:-100000px;left:-100000px;z-index:200;",_sortReString:null,_displayRegExp:null,_displayHash:null,_colsHash:null,_suggestionEnable:false,_selectFlag:false,_getLengthRe:/[^\x00-\xFF]/g});if(this.opts.source.suggestion){this.suggestion=new C(this.target,{source:K.opts.source,message:K.opts.message,template:{suggestion:K.opts.template.suggestion,suggestionStyle:K.opts.template.suggestionStyle,suggestionInit:K.opts.template.suggestionInit},tempBox:K.tempBox});this.suggestion.container.bind("mousedown",function(L){K._filterMousedown(L);});}this.filter=new I(this.target,{source:K.opts.source,message:K.opts.message,jsonpFilter:K.opts.jsonpFilter,sort:K.opts.sort,display:K.opts.display,template:{filter:K.opts.template.filter,filterStyle:K.opts.template.filterStyle,filterInit:K.opts.template.filterInit,filterPageSize:K.opts.template.filterPageSize},charset:K.opts.charsetm,tempBox:K.tempBox,container:K.opts.template.filterContainer,isShowHover:K.opts.isShowHover});this.filter.container.bind("mouseover",function(L){K._filterMouseover(L);});this.filter.container.bind("mousedown",function(L){K._filterMousedown(L);});},bindEvent:function(){var J=this;this.target.bind("focus",function(K){J._focus(K);});this.target.bind("blur",function(){J._blur();});this.target.bind("keydown",function(K){J._keydown(K);});this.target.bind("keypress",function(K){J._keypress();});this.target.bind("mouseup",function(){J._mouseup();});this.target.bind("mousedown",function(K){J._focus(K);});this.target.bind("keydown",function(K){J._focus(K);});},validate:function(J,M){this._initSort();this._initDisplay();var N=this;var L=this.target.val().trim().replace(/[\|@]/g,"");if(!L){this._unselect(true,true);return false;}if(this.jsonpFilter){this.filter.filterData(L,J,true,function(O){if(O){N._select(O,true);M&&M(true);}else{N._unselect(false,true);M&&M(false);}});return false;}else{var K=this.filter.filterData(L,J,true);if(K){this._select(K,true);M&&M(true);return true;}else{this._unselect(false,true);M&&M(false);return false;}}},_focus:function(J){if(this._isFocus){if(this.opts.source.suggestion&&!this._suggestionEnable&&!this.filter._filterEnable){this.suggestion.show();}return;}var L=this;this._isFocus=true;this._isCharIn=false;this._tmpValue=this.filter._lastValue=null;this.filter.clear();this._inputCheck();clearTimeout(this._checkClock);clearInterval(this._focusClock);this._focusClock=setInterval(function(){L._focusInterval();},G);var K=this.target[0];if(this.opts.source.data){switch(J.type){case"mousedown":setTimeout(function(){K.select();});break;case"focus":K.select();break;}}},_blur:function(){if(!this._isFocus){return;}this._isFocus=false;this._hiddenSuggestion();this.filter.hide();clearTimeout(this._checkClock);clearInterval(this._focusClock);if(!this._selectFlag){if(this.opts.isAutoCorrect){if(!this.opts.source){this._unselect(true,true);return;}else{this._unselect(false,true);var J=this;this.validate(!this.opts.isAutoCorrect,function(K){if(!K){J._unselect(true,false);}});}}}},_keydown:function(O){switch(O.keyCode){case A.KEY_ENTER:if(this.filter._filterEnable){var M=this.filter._lastSelect;this._isFocus=false;if(M){var K=M[0].getAttribute("data");this._select(K);this.target.trigger("enter");return;}this._hiddenFilter();}this.target.trigger("enter");break;case A.KEY_LEFT:case A.KEY_RIGHT:if(this.filter._filterEnable){var L=this.filter._lastFilterRendarData;if(L&&L.page.max>=0){switch(O.keyCode){case A.KEY_LEFT:if(L.page.current>0){this.filter.updateFilter(null,null,L.page.current-1);}break;case A.KEY_RIGHT:if(L.page.current<L.page.max){this.filter.updateFilter(null,null,L.page.current+1);}break;}}}break;case A.KEY_UP:case A.KEY_DOWN:if(this.filter._filterEnable){var M=this.filter._lastSelect,L=this.filter._lastFilterRendarData,J=this.filter.container.find("*[data]"),P=-1;if(M!==null&&L){for(var N=J.length-1;N>=0;N--){if(J[N]==this.filter._lastSelect[0]){P=N;break;}}if(P!=-1){var Q=L.list.length;P=(P+Q+O.keyCode-39)%Q;this.filter.showHover(J[P]);}else{this.filter.showHover(J[0]);}}else{this.filter.showHover(J[0]);}}break;default:if(!this.opts.isShowHover){this.filter._lastSelect=null;}this._isCharIn=true;return true;}O.preventDefault();O.stopPropagation();return false;},_keypress:function(){this._isCharIn=true;},_mouseup:function(){var J=this.target[0];if(J.releaseCapture){J.releaseCapture();}},_focusInterval:function(){var J=this.target.val().trim().replace(/[\|@]/g,"");if(!this.opts.source||this._tmpValue===J){return;}this._tmpValue=J;if(this.delay){clearTimeout(this._checkClock);this._checkClock=setTimeout(this._inputCheck,this.delay);}else{this._inputCheck();}},_inputCheck:function(){var J=this.target.val().trim().replace(/[\|@]/g,"");if(!this.opts.source||this.filter._lastValue===J){return;}if(this.filter._lastValue!==null){this._isCharIn=true;}this.filter._lastValue=J;if(this._getLength(J)>=this.opts.minLength&&this._isCharIn){this._showFilter(J);}else{if(this.opts.source.suggestion){this._showSuggestion();}}},_getLength:function(J){return J.replace(this._getLengthRe,"  ").length;},_showFilter:function(J){this.filter._filterEnable=true;this.filter._filterCount++;this._hiddenSuggestion();J=J.replace(/[\|@]/g,"");this._initSort();this._initDisplay();this.filter.filterData(J,false,false);},_hiddenFilter:function(){this.filter._filterEnable=false;this.filter.hide();},_showSuggestion:function(){this._suggestionEnable=true;this._hiddenFilter();this.suggestion.show();},_hiddenSuggestion:function(){if(this.opts.source.suggestion){this._suggestionEnable=false;this.suggestion.hide();}},_filterMouseover:function(J){var K=J.target;while(K&&K.tagName!="A"){K=K.parentNode;}if(K){var L=K.getAttribute("data");if(L){this.filter.showHover(K);return;}}},_filterMousedown:function(K){var M=K.target;while(M&&M.tagName!="A"){M=M.parentNode;}if(M){var N=M.getAttribute("data");if(N){if($$.browser.IsIE){var J=this;M.onclick=function(){J._select(N);};this._isSuggestionRender=false;}else{this._select(N);}}var L=M.getAttribute("page");if(L){this.filter.updateFilter("","",+L);}}K.preventDefault();K.stopPropagation();M=this.target[0];if(M.setCapture){M.setCapture();}return false;},_initCols:function(){if(this._colsHash){return;}var L=this._colsHash={};if(this.opts.source.alias){for(var J=0,K=this.opts.source.alias.length;J<K;J++){this._colsHash[this.opts.source.alias[J]]=J;}}},_initSort:function(){this._initCols();if(this._sortReString){return;}var K=this._sortReString=this.filter.sortReString={accurate:[],vague:[]};var P=0,M=0;switch(A.type(this.opts.sort)){case"array":for(var N=0,O=this.opts.sort.length;N<O;N++){var L=this.opts.sort[N].match(/^(\^?)([^\^\$\|@\r\n\+]+)(\+?)(\$?)$/);if(L){if(/^\d$/.test(L[2])){L[2]=parseInt(L[2],10);}else{if(L[2] in this._colsHash){L[2]=this._colsHash[L[2]];}else{A.error("address._initSort","invalid sort column "+L[2]);continue;}}var J=(+L[2]||L[3])?"([^\\|@]*\\|){"+L[2]+(L[3]?",":"")+"}":"";K.accurate[P++]=["@("+J,"","(\\|[^@]*)?)(?=@)"];K.vague[M++]=["@("+J+(L[1]?"":"[^\\|@]*"),"",(L[4]?"(\\|[^@]*)?":"[^@]*")+")(?=@)"];}else{A.error("address._initSort","invalid sort rule "+this.opts.sort[N]);}}break;case"function":break;default:A.error("address._initSort","invalid sort type "+this.opts.sort);break;}},_initDisplay:function(){this._initCols();if(this._displayHash){return;}var J=this._displayHash=this.filter.displayHash={};var K,L;for(K in this.opts.display){L=this.opts.display[K];if(/^\d$/.test(L)){J[K]=parseInt(L,10);}else{if(L in this._colsHash){J[K]=this._colsHash[L];}else{J[K]=null;A.error("address._initDisplay","invalid display column "+arr[1]);continue;}}}},_getItems:function(O){this._initCols();var J=O.split("|");var K={length:J.length};for(var M=0,N=J.length;M<N;M++){K[M]=J[M];}var L=this.opts.source.alias;if(L){for(var M=0,N=L.length;M<N;M++){K[L[M]]=J[M];}}return K;},_select:function(T,K){var M=this;this._selectFlag=true;setTimeout(function(){M._selectFlag=false;});this._initDisplay();var N=T.split("|");var L=N[this._displayHash.value]||"";this._tmpValue=this.filter._lastValue=L.trim();this.target.val(L);this.target.attr("data-val",T);this.filter.clear();this._hiddenSuggestion();this._hiddenFilter();if(this.relate){for(var R in this.relate){if(this.relate.hasOwnProperty(R)){var O=A(this.relate[R]);if(!O[0]){A.error("address._select","invalid relate element");continue;}if(/^\d$/.test(R)){R=parseInt(R,10);}else{if(R in this._colsHash){R=this._colsHash[R];}else{A.error("address._select","invalid relate column "+R);continue;}}O.value(N[R]||"");}}}this.target.trigger("change",{arguments:{value:L,data:T,items:this._getItems(T)}});if(!K&&this.isFocusNext){var Q=this.target[0].form;if(!Q){A.error("address._select","invalid form");return;}var J=Q.elements;for(var P=0,S=J.length-1;P<S;P++){if(J[P]==this.target[0]){setTimeout(function(){J[P+1].focus();});return;}}}},_unselect:function(K,M){if(K){this._tmpValue=this.filter._lastValue=null;this.target.val("");this.filter.clear();this._hiddenSuggestion();this._hiddenFilter();this.target.trigger("change",{arguments:{value:"",data:"",items:null}});}if(M&&this.opts.relate){for(var J in this.opts.relate){if(this.opts.relate.hasOwnProperty(J)){var L=A(this.opts.relate[J]);if(!L[0]){A.error("address._select","invalid relate element");continue;}L.val("");}}}}};function D(Q){var M=Q.find("span"),N=Q.find("ul");if(!M.length){return;}function J(){var R=this;M.each(function(S,T){if(T==R){A(T).addClass("hot_selected");N[S].style.display="";}else{A(T).removeClass("hot_selected");N[S].style.display="none";}});}var L=30;for(var O=0,P=M.length;O<P;O++){L+=M[O].offsetWidth;}var K=Q.find("div").first();if(K[0]){if(L>278){K.css("width",L+"px");}}M.bind("mousedown",J);J.apply(M[0]);}function B(){}A.fn.extend({Address:function(J){var K={};if(typeof J!=="undefined"){A.extend(true,K,J);}H["instance"]=new H(this,K);return H["instance"];}});})(jQuery,undefined);