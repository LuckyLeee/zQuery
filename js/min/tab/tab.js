(function(A){var B=function(C,D){D=A.extend({btns:null,views:null,initView:null,tabClass:["","on"],index:0,url:null,tempalte:null,eventType:"click",querySelecterKey:"key",ajaxId:"locationId",ajaxFun:null,onLoad:null,onFisrtLoad:null},D);this.target=A(C);this.init(D);};B.prototype={init:function(C){this.lastKey=null;this.currentKey=null;this.cache={};this.btnPoint={},this.setOptions(C);this.bindEvent();},setOptions:function(E){A.extend(this,E);if(this.initView!==null){var D=A(this.btns[this.index]),C=D.data(this.querySelecterKey);this.cache[C]=this.initView;this.currentKey=C;this.btnPoint[C]=D;D.addClass(this.tabClass[1]);}},Switch:function(C){if(this.currentKey!==null){this.hide();this.show(C);}},hide:function(){this.btnPoint[this.currentKey].removeClass(this.tabClass[1]);this.cache[this.currentKey].hide();},show:function(C){this.currentKey=C;this.btnPoint[C].addClass(this.tabClass[1]);this.cache[C].show();if(A.type(this.onLoad)==="function"){this.onLoad(this.cache[C],this.btnPoint[C]);}},bindEvent:function(){var E=this;if(this.url){this.btns.bind(E.eventType,function(){if(A(this).hasClass(E.tabClass[1])){return;}var F=A(this),I=F.data(E.querySelecterKey);if(E.cache[I]==null){var H=A("<div></div>");E.target.append(H);E.cache[I]=H;E.btnPoint[I]=F;if(E.ajaxFun==null){var G={};G[E.ajaxId]=I;A.post(E.url,G,function(J){H.html(A.template.replace(E.tempalte,A.parseJSON(J)));E.Switch(I);if(A.type(E.onFisrtLoad)==="function"){E.onFisrtLoad.call(E,H,F);}});}else{if(A.type(E.ajaxFun)==="function"){E.Switch(I);E.ajaxFun.call(E,I,H,F);}}}else{E.Switch(I);}});if(this.initView===null){var D=A(this.btns[this.index]);this.currentKey=D.data(E.querySelecterKey);D.trigger(E.eventType);}}else{for(var C=this.btns.length-1;C>=0;C--){this.btnPoint[C]=A(this.btns[C]);this.cache[C]=A(this.views[C]);(function(F){E.btnPoint[F].bind(E.eventType,function(){if(E.btnPoint[F].hasClass(E.tabClass[1])){return;}E.Switch(F);});})(C);}this.show(this.index);}}};A.fn.extend({Tab:function(C){var D={};if(typeof C!=="undefined"){A.extend(true,D,C);}B["instance"]=new B(this,D);return B["instance"];}});})(jQuery);